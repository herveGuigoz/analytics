# supabase_analytics

A supabase analytics library for tracking page views, custom events, & identify visitors.

## Usage

To use this plugin, add supabase_analytics as a dependency in your pubspec.yaml file:

```yaml
dependencies:
  supabase_analytics:
    git: git@github.com:herveGuigoz/supabase_analytics.git
```

## Setup Supabase API

- Create you tables on Supabase SQL editor.

```
CREATE TYPE public.events AS ENUM (
    'app_open',
    'sign_up',
    'login',
    'logout',
    'screen_viewed',
    'join_group',
    'viewed_item',
    'shared'
);

CREATE TABLE public.sessions (
    id uuid PRIMARY KEY NOT NULL,
    os VARCHAR(20),
    version VARCHAR(20),
    locale VARCHAR(5),
    created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL
);

CREATE TABLE public.actions (
    id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    session_id uuid references public.sessions(id) ON DELETE CASCADE NOT NULL,
    event events NOT NULL,
    data varchar(50) not null,
    inserted_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL
);
```

- Search for events on Supabase SQL editor

```
SELECT * FROM public.actions WHERE data -> 'user_id' = '1';
```